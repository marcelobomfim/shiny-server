"0","library(plotly)"
"0","# os textos do hover estão hardcoded no plotly. Então, em plotly-latest.min.js,"
"0","# que está na instalação do R, R\win-library\3.4\plotly\htmlwidgets\lib\plotlyjs,"
"0","# substituí ""Incoming Flow Count"", ""Outgoing Flow Count"", ""Source:"" e ""Target:"""
"0","# pelas expressões que eu quis."
"0","p <- function(dados,nomes){"
"0","  plot_ly("
"0","    type = ""sankey"","
"0","    orientation = ""h"","
"0","    width = 800,"
"0","    height = 700,"
"0","    opacity = 0.6, "
"0","    # será q isso controla a opacidade dos hovers? # nope, é hardcoded,"
"0","    #valueformat = "">-.3~g"","
"0","    #valuesuffix = "" bilhões de reais"","
"0","    textfont = list("
"0","      family = ""Source Sans Pro"","
"0","      color = ""#444444"","
"0","      size = 12"
"0","    ),"
"0","    node = list("
"0","      label = nomes,"
"0","      color = cores_nos,"
"0","      pad = 10,"
"0","      thickness = 25,"
"0","      line = list("
"0","        color = """","
"0","        width = 0"
"0","      )"
"0","    ),"
"0","    "
"0","    hoverlabel = list("
"0","       font = list("
"0","         family = ""Source Sans Pro"""
"0","       )"
"0","     ),"
"0","    link = list("
"0","      source = dados$nos_rec,"
"0","      target = dados$nos_desp,"
"0","      value =  dados$ramo,"
"0","      color = dados$cores_ramos"
"0","     #color =  ""rgba(255,213,0,0.4)"" "
"0","     # para deixar a cor translucida, é preciso usar rgba"
"0","      "
"0","    )"
"0","  ) %>% "
"0","  layout("
"0","    title = """","
"0","    font = list("
"0","      family = ""Source Sans Pro"","
"0","      size = 11,"
"0","      color = ""#004a93"""
"0","    )"
"0",")"
"0","}"
