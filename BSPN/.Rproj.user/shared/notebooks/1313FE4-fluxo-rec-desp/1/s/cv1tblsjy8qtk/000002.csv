"0","# DEFINIÇÕES DAS CORES"
"0","library(RColorBrewer)"
"0","azul_STN <- ""#004a93"""
"0","cor_divida_transluc <- ""rgba(221, 49, 39,0.7)"""
"0","cor_RGPS_transluc <- ""rgba(0,75,147,0.7)"""
"0","cor_divida <- ""#dd3127"""
"0","cor_RGPS <- azul_STN"
"0","cor_padrao_despesas <- ""#888888"""
"0","qde_rec_destacadas <- 2"
"0","qde_cores_extras <- length(unique(matriz$nr)) - qde_rec_destacadas"
"0","paleta_STN <- brewer.pal(qde_cores_extras, ""Set2"")"
"0","#paleta_STN <- c(""#F8AC08"",""#CEC806"",""#96C11E"",""#028063"",""#149339"",""#4E857E"",""#6E287C"")"
"0","paleta_STN_rgb <- col2rgb(paleta_STN)"
"0","# essa função gera uma matriz com os componentes RGB."
"0","# precisamos fornecer as cores no formato ""rgb(r,g,b)"""
"0","# além disso, para os ramos, é interessante que as cores sejam translúcidas, "
"0","# então vamos acrescentar um componente de transparência"
"0","paleta_STN_transluc <- NULL"
"0","for (i in 1:dim(paleta_STN_rgb)[2] ) {"
"0","  paleta_STN_transluc <- c(paleta_STN_transluc, paste(""rgba("", paleta_STN_rgb[1,i],"", "",  paleta_STN_rgb[2,i],"", "",  paleta_STN_rgb[3,i],"", 0.7)"", sep = """"))"
"0","}"
"0","# rotininha para povoar as cores dos ramos e dos nos, conforme as receitas"
"0","receitas <- unique(matriz$nr)"
"0","cores_ramos <- NULL"
"0","cores_nos <- NULL"
"0","k = 1"
"0","for (i in 1:length(receitas)) {"
"0","  if (receitas[i] == ""Contribuições e outras receitas do RGPS"") {"
"0","    cores_ramos <- c(cores_ramos, cor_RGPS_transluc)"
"0","    cores_nos <- c(cores_nos, cor_RGPS)"
"0","  }"
"0","  else if (receitas[i] == ""Emissões de títulos"") {"
"0","    cores_ramos <- c(cores_ramos, cor_divida_transluc)"
"0","    cores_nos <- c(cores_nos, cor_divida)"
"0","  }"
"0","  else {"
"0","    cores_ramos <- c(cores_ramos, paleta_STN_transluc[k])"
"0","    cores_nos <- c(cores_nos, paleta_STN[k])"
"0","    k <- k + 1 # o certo seria fazer algo modular, caso sejam mais receitas que cores"
"0","  }"
"0","}"
"0","## povoando as cores das despesas... (com um método mais elegante do que um loop)"
"0","despesas <- unique(matriz$nd)"
"0","cores_despesas <- rep(cor_padrao_despesas, length(despesas))"
"0","cores_despesas[despesas == ""Amortização da Dívida"" | despesas == ""Juros""] <- cor_divida"
"0","cores_despesas[despesas == ""Benefícios Previdenciários RGPS""] <- cor_RGPS"
"0","## fechando a lista de cores dos nos"
"0","cores_nos <- c(cores_nos, cores_despesas)"
"0","## tabelinha para usar de referência no preenchimento da matriz"
"0","tabelinha_cores_ramos <- data.frame(receitas, cores_ramos)"
"0","## preenchendo as cores dos ramos na matriz a partir dessa tabelinha"
"0","matriz <- matriz %>%"
"0","  left_join(tabelinha_cores_ramos, by = c(""nr"" = ""receitas""))"
